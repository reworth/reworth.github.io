<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Reworth&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://reworth.site/"/>
  <updated>2017-12-29T10:43:12.447Z</updated>
  <id>http://reworth.site/</id>
  
  <author>
    <name>Reworth Yan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>awk</title>
    <link href="http://reworth.site/2017/12/29/awk/"/>
    <id>http://reworth.site/2017/12/29/awk/</id>
    <published>2017-12-29T10:00:59.000Z</published>
    <updated>2017-12-29T10:43:12.447Z</updated>
    
    <content type="html"><![CDATA[<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><p><strong>awk</strong>是一种处理文本的语言，是一个强大的文本分析工具，awk是以列为划分记数的，$0表示所有列，$1表示第一列，$2表示第二列。</p><h2 id="awk常用参数"><a href="#awk常用参数" class="headerlink" title="awk常用参数"></a>awk常用参数</h2><ul><li>-F指定输入文件分隔符，如-F：</li><li>-v 赋值一个用户定义变量，如-va=1</li><li>-f 从脚本文件中读取awk命令</li></ul><h2 id="多个分隔符"><a href="#多个分隔符" class="headerlink" title="多个分隔符"></a>多个分隔符</h2><p><code>awk -F &#39;[-|]&#39; &#39;{print $3}&#39; data</code><br>上面这个例子是以-和|为分隔符进行分割。</p><h2 id="设置变量"><a href="#设置变量" class="headerlink" title="设置变量"></a>设置变量</h2><p>设置awk自定义变量，使用参数-v<br><code>cat data.txt | awk -v a=9 &#39;{print $1,$1+a}&#39;</code><br>如上，设置了变量a的值，在输出的时候添加一个$1+a的值。<br>如果在脚本中使用的时候，前面已经定义了一个$2的变量，并且你就是像要使用这个变量的话，就要使用以下的形式：<br><code>awk &#39;{print $$2}&#39;</code></p><h2 id="逻辑判断"><a href="#逻辑判断" class="headerlink" title="逻辑判断"></a>逻辑判断</h2><p><code>cat data.txt | awk &#39;$1==&quot;reworth&quot; {print}</code><br>输出第一列为reworth的所有行。<br><code>cat data.txt | awk &#39;$1!=&quot;reworth&quot; {print}&#39;</code><br>输出第一列不是reworth的所有行。</p><h2 id="正则匹配"><a href="#正则匹配" class="headerlink" title="正则匹配"></a>正则匹配</h2><p><code>cat data.txt | awk &#39;$2 ~ /reworth.*/ {print}&#39;</code><br>匹配第二列中以reworth开头的所有行。对某列进行匹配时需要在列之后加个～表示进行匹配。<br><code>cat data.txt | awk &#39;/reworth.*/ {print}&#39;</code><br>匹配以reworth开头的所有行。<br><strong>匹配取反</strong> !~<br><code>cat data.txt | awk &#39;$2 !~ /reworth/ {print}&#39;</code><br>匹配第二列不是reworth的所有行。</p><h2 id="内置变量"><a href="#内置变量" class="headerlink" title="内置变量"></a>内置变量</h2><ul><li>FILENAME : 当前输入文件名称</li><li>NF : 当前输入行的字段编号</li><li>OFS : 输出字段分隔符</li><li>NR : 当前输入行编号(是指输入行 1，2，3……等)</li><li>FS : 输入字段分隔符</li><li>ORS : 输出记录分隔符</li><li>RS : 输入记录分隔符</li></ul><h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2><p><strong>substr字符串截取</strong><br><code>cat data.txt | awk &#39;{print substr($1,1,4)}&#39;</code><br>截取第一列中的第一个到第四个字符。<br><strong>split 切片</strong><br><code>cat data.txt |awk &#39;{split($1,a,&quot;,&quot;);print a[1],a[2],a[3]}&#39;</code><br>以逗号分隔第一列，并输出分隔后的数据。<br><strong>gsub 替换</strong><br><code>cat data.txt | awk &#39;&#39;{gsub(&quot;abc&quot;,&quot;asd&quot;,$2);print}</code><br>将第二列中的abc替换成asd</p><h2 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h2><blockquote><p>grep ‘tower_activity_op’ /data/s*/log/test.log  | awk -F’[=,]’ ‘{a[$2] -= $12; b[$2] -= $14; item_count[$2]++;} END{for(i in a) {serverid=i;  cmd=”/usr/bin/mysql -u root -h \”192.168.0.1\” -p1234 -D stat -e \”replace into test(date,uid,cash,coins,number,code,serverid) values(\047’$Date’\047,”i”,”a[i]”,”b[i]”,”item_count[i]”,\047测试\047,”serverid”)\””; system(cmd);}}’ </p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;awk&quot;&gt;&lt;a href=&quot;#awk&quot; class=&quot;headerlink&quot; title=&quot;awk&quot;&gt;&lt;/a&gt;awk&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;awk&lt;/strong&gt;是一种处理文本的语言，是一个强大的文本分析工具，awk是以列为划分记数的，$0表示所有列，$
      
    
    </summary>
    
      <category term="linux" scheme="http://reworth.site/categories/linux/"/>
    
    
      <category term="awk" scheme="http://reworth.site/tags/awk/"/>
    
  </entry>
  
  <entry>
    <title>volume-container</title>
    <link href="http://reworth.site/2017/12/28/volume-container/"/>
    <id>http://reworth.site/2017/12/28/volume-container/</id>
    <published>2017-12-28T11:00:24.000Z</published>
    <updated>2017-12-29T07:03:58.446Z</updated>
    
    <content type="html"><![CDATA[<p>volume container是专门为其他容器提供volume的容器。它提供的卷可以是bind mount,<br>也可以是docker managed volume.下面我创建一个volume container:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker create --name vc_data \</span><br><span class="line">-v ~/htdocs:/usr/local/apache2/htdocs \</span><br><span class="line">-v ~/other/useful/tools \</span><br><span class="line">busybox</span><br></pre></td></tr></table></figure></p><p>我们将容器命名为vc_data.注意这里执行的是docker create命令，这是因为volume container<br>的作用是只提供数据，它本身不需要处于运行状态。容器中mount了两个volume:</p><ul><li>bind mount,存放web server的静态文件。</li><li>docker managed volume,存放一些实用的工具<br>通过docker inspect可以查看这两个volume</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;volume container是专门为其他容器提供volume的容器。它提供的卷可以是bind mount,&lt;br&gt;也可以是docker managed volume.下面我创建一个volume container:&lt;br&gt;&lt;figure class=&quot;highlight
      
    
    </summary>
    
      <category term="docker" scheme="http://reworth.site/categories/docker/"/>
    
    
      <category term="volume" scheme="http://reworth.site/tags/volume/"/>
    
  </entry>
  
  <entry>
    <title>test</title>
    <link href="http://reworth.site/2017/12/27/test/"/>
    <id>http://reworth.site/2017/12/27/test/</id>
    <published>2017-12-27T07:17:58.000Z</published>
    <updated>2017-12-27T07:36:39.053Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Quick-Test"><a href="#Quick-Test" class="headerlink" title="Quick Test"></a>Quick Test</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ testing</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Quick-Test&quot;&gt;&lt;a href=&quot;#Quick-Test&quot; class=&quot;headerlink&quot; title=&quot;Quick Test&quot;&gt;&lt;/a&gt;Quick Test&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Crea
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://reworth.site/2017/12/27/hello-world/"/>
    <id>http://reworth.site/2017/12/27/hello-world/</id>
    <published>2017-12-27T03:24:57.081Z</published>
    <updated>2017-12-27T03:24:57.081Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
</feed>
